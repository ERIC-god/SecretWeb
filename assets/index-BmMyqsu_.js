import{F as v,v as z,E as g,a as N,b as B,_ as V}from"./vee-validate-DxuEB4qC.js";import{u as j}from"./request-B6Dzic8e.js";import{H as Q,l as p,a as b,b as f,v as T,f as s,e,x as U,Q as x,r as _,m as E,h as H,g as A,i as o,j as F}from"./index-JqDeAB-5.js";import"./_commonjsHelpers-Cpj98o6Y.js";const w="LOGIN_SUCCESS_CHANNEL";let h=null;window.BroadcastChannel&&(h=new BroadcastChannel(w));const I=c=>{h?h.postMessage(c):localStorage.setItem(w,JSON.stringify(c))},M={id:"qqLoginBtn"},O={__name:"qq-login",setup(c){Q(()=>{QC.Login({btnId:"qqLoginBtn"},(n,l)=>{console.log("QQ登录成功");const a=/access_token=((.*))&expires_in/.exec(window.location.hash)[1],u={nickname:n.nickname,figureurl_qq_2:n.figureurl_qq_2,accessToken:a};I(u)})});const i=()=>{x("error","The QQ Accession is Temporarily Unavailable")};return(n,l)=>{const a=p("m-svg-icon");return f(),b("div",null,[T(e("span",M,null,512),[[U,!1]]),s(a,{class:"w-4 cursor-pointer absolute top-[-4px] left-12",name:"qq",onClick:i})])}}},W={class:"h-screen w-screen flex justify-center bg-zinc-700"},$={class:"h-full w-[400px] xl:w-[30%]"},G={class:"w-full h-52 bg-zinc-300 rounded shadow-md relative"},P={class:"flex items-center justify-center h-8 text-xl"},R={class:"h-4 w-[80%]"},D={class:"flex items-center justify-center h-8 text-xl"},J={class:"h-4 w-[80%] border-b"},K={class:"w-full h-8 mt-3 flex items-center justify-center"},X={class:"relative w-full h-12"},oe={__name:"index",setup(c){const i=j(),n=F(),l=_(!1),a=()=>{l.value=!0},u=()=>{l.value=!1},C=()=>{l.value=!1,y()},d=_(!1),r=_({username:"",password:""}),y=async()=>{d.value=!0;try{await i.userLogin({...r.value,loginType:"username"})}finally{d.value=!1}n.push("/"),x("success","Login success!",4e3),i.userProfile()},S=()=>{n.push("/register")},L=()=>{x("error","The Wechat Accession is Temporarily Unavailable")};return(Y,t)=>{const k=p("m-button"),q=p("m-svg-icon");return f(),b("div",W,[e("div",$,[t[3]||(t[3]=e("div",{class:"w-full h-16 relative flex items-center justify-center text-center"},[e("span",{class:"text-zinc-300 absolute top-[15%] xl:left-[5%]"},"Welcome To A Secret Man's WebSite")],-1)),e("div",G,[t[2]||(t[2]=e("div",{class:"flex items-center justify-center h-8 text-xl"},[e("span",null,"Login")],-1)),s(o(B),{onSubmit:a},{default:A(()=>[e("div",P,[e("div",R,[s(o(v),{type:" text",name:"username",placeholder:"用户名",modelValue:r.value.username,"onUpdate:modelValue":t[0]||(t[0]=m=>r.value.username=m),rules:o(z),class:"h-full w-full text-xm outline-0 bg-zinc-300 border-b border-b-zinc-400"},null,8,["modelValue","rules"])])]),s(o(g),{class:"text-xm text-red-600 absolute left-[10%] top-[28%]",name:"username"}),e("div",D,[e("div",J,[s(o(v),{type:"password",name:"password",placeholder:"密码",modelValue:r.value.password,"onUpdate:modelValue":t[1]||(t[1]=m=>r.value.password=m),rules:o(N),class:"h-full w-full text-xm outline-0 bg-zinc-300 border-b border-b-zinc-400"},null,8,["modelValue","rules"])])]),s(o(g),{class:"text-xm text-red-600 absolute left-[10%] top-[43%]",name:"password"}),e("div",null,[e("span",{onClick:S,class:"text-zinc-500 text-xm absolute right-3 cursor-pointer"},"去注册")]),e("div",K,[s(k,{icon:"hacker",class:"!w-20 !text-zinc-200 !text-xl !h-4 dark:!bg-zinc-400 !rounded hover:!bg-zinc-600 !bg-zinc-200",loading:d.value},null,8,["loading"])])]),_:1}),e("div",X,[s(O),s(q,{class:"w-4 cursor-pointer absolute top-[-4px] right-12",name:"wexin",onClick:L})])])]),l.value?(f(),E(V,{key:0,onClose:u,onSuccess:C})):H("",!0)])}}};export{oe as default};
