import{g as Jt}from"./request-B6Dzic8e.js";import{H as it,l as Zt,a as Qt,b as en,e as Ke,f as gt,S as at,U as be,c as M,V as lt,W as ke,X as Mt,r as ue,Y as Te,Z as O,i as x,G as xe,w as Ve,$ as tn,a0 as nn,a1 as rn,z as ce,a2 as an,a3 as Re,a4 as Qe}from"./index-JqDeAB-5.js";(function(){function e(r){var s=document.getElementById(r.id),u=typeof r=="object"&&r;return new i(s,u)}var t=function(){var r=arguments.length,s=arguments[0]||{},u,f,c;for(typeof s!="object"&&typeof s!="function"&&(s={}),r==1&&(s=this,u--),u=1;u<r;u++){f=arguments[u];for(c in f)Object.prototype.hasOwnProperty.call(f,c)&&(s[c]=f[c])}return s},n=function(r){return typeof r=="function"&&typeof r.nodeType!="number"},i=function(r,s){this.$element=r,this.options=t({},i.DEFAULTS,s),this.$element.style.position="relative",this.$element.style.width=this.options.width+"px",this.$element.style.margin="0 auto",this.init()},o;i.VERSION="1.0",i.Author="imooc_front@163.com",i.DEFAULTS={width:280,height:155,PI:Math.PI,sliderL:42,sliderR:9,offset:5,loadingText:"正在加载中...",failedText:"再试一次",barText:"向右滑动填充拼图",repeatIcon:"iconfont iconfont-shuaxin",maxLoadCount:3,localImages:function(){return"images/Pic"+Math.round(Math.random()*4)+".jpg"},verify:function(r,s){var u=!1;return $.ajax({url:s,data:{datas:JSON.stringify(r)},dataType:"json",type:"post",async:!1,success:function(f){u=JSON.stringify(f),console.log("返回结果："+u)}}),u},remoteUrl:""},window.sliderCaptcha=e,window.sliderCaptcha.Constructor=i,o=i.prototype,o.init=function(){this.initDOM(),this.initImg(),this.bindEvents()},o.initDOM=function(){var r=function(I,Z){var R=document.createElement(I);return R.className=Z,R},s=function(I,Z){var R=document.createElement("canvas");return R.width=I,R.height=Z,R},u=s(this.options.width-2,this.options.height),f=u.cloneNode(!0),c=r("div","sliderContainer"),h=r("i","refreshIcon "+this.options.repeatIcon),b=r("div","sliderMask"),m=r("div","sliderbg"),v=r("div","slider"),S=r("i","iconfont icon-arrow-right sliderIcon"),j=r("span","sliderText"),p,A;f.className="slider-captcha-block",j.innerHTML=this.options.barText,p=this.$element,p.appendChild(u),p.appendChild(h),p.appendChild(f),v.appendChild(S),b.appendChild(v),c.appendChild(m),c.appendChild(b),c.appendChild(j),p.appendChild(c),A={canvas:u,block:f,sliderContainer:c,refreshIcon:h,slider:v,sliderMask:b,sliderIcon:S,text:j,canvasCtx:u.getContext("2d"),blockCtx:f.getContext("2d")},n(Object.assign)?Object.assign(this,A):t(this,A)},o.initImg=function(){var r=this,s=window.navigator.userAgent.indexOf("Trident")>-1,u=this.options.sliderL+this.options.sliderR*2+3,f=function(m,v){var S=r.options.sliderL,j=r.options.sliderR,p=r.options.PI,A=r.x,I=r.y;m.beginPath(),m.moveTo(A,I),m.arc(A+S/2,I-j+2,j,.72*p,2.26*p),m.lineTo(A+S,I),m.arc(A+S+j-2,I+S/2,j,1.21*p,2.78*p),m.lineTo(A+S,I+S),m.lineTo(A,I+S),m.arc(A+j-2,I+S/2,j+.4,2.76*p,1.24*p,!0),m.lineTo(A,I),m.lineWidth=2,m.fillStyle="rgba(255, 255, 255, 0.7)",m.strokeStyle="rgba(255, 255, 255, 0.7)",m.stroke(),m[v](),m.globalCompositeOperation=s?"xor":"destination-over"},c=function(m,v){return Math.round(Math.random()*(v-m)+m)},h=new Image,b;h.crossOrigin="Anonymous",b=0,h.onload=function(){r.x=c(u+10,r.options.width-(u+10)),r.y=c(10+r.options.sliderR*2,r.options.height-(u+10)),f(r.canvasCtx,"fill"),f(r.blockCtx,"clip"),r.canvasCtx.drawImage(h,0,0,r.options.width-2,r.options.height),r.blockCtx.drawImage(h,0,0,r.options.width-2,r.options.height);var m=r.y-r.options.sliderR*2-1,v=r.blockCtx.getImageData(r.x-3,m,u,u);r.block.width=u,r.blockCtx.putImageData(v,0,m+1),r.text.textContent=r.text.getAttribute("data-text")},h.onerror=function(){if(b++,window.location.protocol==="file:"&&(b=r.options.maxLoadCount,console.error("can't load pic resource file from File protocal. Please try http or https")),b>=r.options.maxLoadCount){r.text.textContent="加载失败",r.classList.add("text-danger");return}h.src=r.options.localImages()},h.setSrc=function(){var m="",v;b=0,r.text.classList.remove("text-danger"),n(r.options.setSrc)&&(m=r.options.setSrc()),m&&m!==""||(m="https://picsum.photos/"+r.options.width+"/"+r.options.height+"/?image="+Math.round(Math.random()*200)),s?(v=new XMLHttpRequest,v.onloadend=function(S){var j=new FileReader;j.readAsDataURL(S.target.response),j.onloadend=function(p){h.src=p.target.result}},v.open("GET",m),v.responseType="blob",v.send()):h.src=m},h.setSrc(),this.text.setAttribute("data-text",this.options.barText),this.text.textContent=this.options.loadingText,this.img=h},o.clean=function(){this.canvasCtx.clearRect(0,0,this.options.width,this.options.height),this.blockCtx.clearRect(0,0,this.options.width,this.options.height),this.block.width=this.options.width},o.bindEvents=function(){var r=this;this.$element.addEventListener("selectstart",function(){return!1}),this.refreshIcon.addEventListener("click",function(){r.text.textContent=r.options.barText,r.reset(),n(r.options.onRefresh)&&r.options.onRefresh.call(r.$element)});var s,u,f=[],c=!1,h=function(v){r.text.classList.contains("text-danger")||(s=v.clientX||v.touches[0].clientX,u=v.clientY||v.touches[0].clientY,c=!0)},b=function(v){var S;if(!c)return!1;var j=v.clientX||v.touches[0].clientX,p=v.clientY||v.touches[0].clientY,A=j-s,I=p-u;if(A<0||A+40>r.options.width)return!1;r.slider.style.left=A-1+"px",S=(r.options.width-60)/(r.options.width-40)*A,r.block.style.left=S+"px",r.sliderContainer.classList.add("sliderContainer_active"),r.sliderMask.style.width=A+4+"px",f.push(Math.round(I))},m=function(v){var S,j;if(!c||(c=!1,S=v.clientX||v.changedTouches[0].clientX,S===s))return!1;r.sliderContainer.classList.remove("sliderContainer_active"),r.trail=f,j=r.verify(),j.spliced&&j.verified?(r.sliderContainer.classList.add("sliderContainer_success"),n(r.options.onSuccess)&&r.options.onSuccess.call(r.$element,f)):(r.sliderContainer.classList.add("sliderContainer_fail"),n(r.options.onFail)&&r.options.onFail.call(r.$element),setTimeout(function(){r.text.innerHTML=r.options.failedText,r.reset()},1e3))};this.slider.addEventListener("mousedown",h),this.slider.addEventListener("touchstart",h),document.addEventListener("mousemove",b),document.addEventListener("touchmove",b),document.addEventListener("mouseup",m),document.addEventListener("touchend",m),document.addEventListener("mousedown",function(){return!1}),document.addEventListener("touchstart",function(){return!1}),document.addEventListener("swipe",function(){return!1})},o.verify=function(){var r=this.trail,s=parseInt(this.block.style.left),u=!1;if(this.options.remoteUrl!==null)u=this.options.verify(r,this.options.remoteUrl);else{var f=function(v,S){return v+S},c=function(v){return v*v},h=r.reduce(f)/r.length,b=r.map(function(v){return v-h}),m=Math.sqrt(b.map(c).reduce(f)/r.length);u=m!==0}return{spliced:Math.abs(s-this.x)<this.options.offset,verified:u}},o.reset=function(){this.sliderContainer.classList.remove("sliderContainer_fail"),this.sliderContainer.classList.remove("sliderContainer_success"),this.slider.style.left=0,this.block.style.left=0,this.sliderMask.style.width=0,this.clean(),this.text.setAttribute("data-text",this.text.textContent),this.text.textContent=this.options.loadingText,this.img.setSrc()}})();const ln={class:"fixed top-[20%] left-[50%] translate-x-[-50%] w-[340px] h-[270px] text-xm bg-white dark:bg-zinc-800 rounded border border-zinc-200 dark:border-zinc-900 shadow-3xl"},on={class:"flex items-center h-5 text-left px-1 mb-1"},pt="close",yt="success",ir={__name:"slider-captcha",emits:[pt,yt],setup(e,{emit:t}){const n=t;let i=null;it(()=>{i=sliderCaptcha({id:"captcha",setSrc:()=>{"https://picsum.photos/?image=200"},async onSuccess(s){await Jt({behavior:s})&&n(yt)},onFail(){console.log("onFail")},verify(){return!0}})});const o=()=>{i.reset()},r=()=>{n(pt)};return(s,u)=>{const f=Zt("m-svg-icon");return en(),Qt("div",ln,[Ke("div",on,[u[0]||(u[0]=Ke("span",{class:"flex-grow dark:text-zinc-200"},"请完成安全验证",-1)),gt(f,{name:"refresh",fillClass:"fill-zinc-900 dark:fill-zinc-200",class:"w-3 h-3 p-0.5 rounded-sm duration-300 cursor-pointer hover:bg-zinc-200 dark:hover:bg-zinc-900",onClick:o}),gt(f,{name:"close",fillClass:"fill-zinc-900 dark:fill-zinc-200",class:"ml-2 w-3 h-3 p-0.5 rounded-sm duration-300 cursor-pointer hover:bg-zinc-200 dark:hover:bg-zinc-900",onClick:r})]),u[1]||(u[1]=Ke("div",{id:"captcha"},null,-1))])}}},ar=e=>e?e.length<6||e.length>12?"用户名应该在 6-12 位之间":!0:"用户名为必填的",lr=e=>e?e.length<6||e.length>12?"密码应该在 6-12 位之间":!0:"密码为必填的",or=(e,t)=>e!==t[0]?"两次密码输入必须一致":!0;/**
  * vee-validate v4.15.0
  * (c) 2024 Abdelrahman Awad
  * @license MIT
  */function q(e){return typeof e=="function"}function Ft(e){return e==null}const Se=e=>e!==null&&!!e&&typeof e=="object"&&!Array.isArray(e);function ot(e){return Number(e)>=0}function un(e){const t=parseFloat(e);return isNaN(t)?e:t}function sn(e){return typeof e=="object"&&e!==null}function dn(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}function bt(e){if(!sn(e)||dn(e)!=="[object Object]")return!1;if(Object.getPrototypeOf(e)===null)return!0;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function je(e,t){return Object.keys(t).forEach(n=>{if(bt(t[n])&&bt(e[n])){e[n]||(e[n]={}),je(e[n],t[n]);return}e[n]=t[n]}),e}function we(e){const t=e.split(".");if(!t.length)return"";let n=String(t[0]);for(let i=1;i<t.length;i++){if(ot(t[i])){n+=`[${t[i]}]`;continue}n+=`.${t[i]}`}return n}const kt={};function ur(e,t){fn(e,t),kt[e]=t}function cn(e){return kt[e]}function fn(e,t){if(!q(t))throw new Error(`Extension Error: The validator '${e}' must be a function.`)}function Ot(e,t,n){typeof n.value=="object"&&(n.value=F(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function F(e){if(typeof e!="object")return e;var t=0,n,i,o,r=Object.prototype.toString.call(e);if(r==="[object Object]"?o=Object.create(e.__proto__||null):r==="[object Array]"?o=Array(e.length):r==="[object Set]"?(o=new Set,e.forEach(function(s){o.add(F(s))})):r==="[object Map]"?(o=new Map,e.forEach(function(s,u){o.set(F(u),F(s))})):r==="[object Date]"?o=new Date(+e):r==="[object RegExp]"?o=new RegExp(e.source,e.flags):r==="[object DataView]"?o=new e.constructor(F(e.buffer)):r==="[object ArrayBuffer]"?o=e.slice(0):r.slice(-6)==="Array]"&&(o=new e.constructor(e)),o){for(i=Object.getOwnPropertySymbols(e);t<i.length;t++)Ot(o,i[t],Object.getOwnPropertyDescriptor(e,i[t]));for(t=0,i=Object.getOwnPropertyNames(e);t<i.length;t++)Object.hasOwnProperty.call(o,n=i[t])&&o[n]===e[n]||Ot(o,n,Object.getOwnPropertyDescriptor(e,n))}return o||e}const Ue=Symbol("vee-validate-form"),vn=Symbol("vee-validate-form-context"),hn=Symbol("vee-validate-field-instance"),Pe=Symbol("Default empty value"),mn=typeof window<"u";function et(e){return q(e)&&!!e.__locatorRef}function se(e){return!!e&&q(e.parse)&&e.__type==="VVTypedSchema"}function Be(e){return!!e&&q(e.validate)}function Ae(e){return e==="checkbox"||e==="radio"}function gn(e){return Se(e)||Array.isArray(e)}function pn(e){return Array.isArray(e)?e.length===0:Se(e)&&Object.keys(e).length===0}function Le(e){return/^\[.+\]$/i.test(e)}function yn(e){return Tt(e)&&e.multiple}function Tt(e){return e.tagName==="SELECT"}function bn(e,t){const n=![!1,null,void 0,0].includes(t.multiple)&&!Number.isNaN(t.multiple);return e==="select"&&"multiple"in t&&n}function On(e,t){return!bn(e,t)&&t.type!=="file"&&!Ae(t.type)}function xt(e){return ut(e)&&e.target&&"submit"in e.target}function ut(e){return e?!!(typeof Event<"u"&&q(Event)&&e instanceof Event||e&&e.srcElement):!1}function Vt(e,t){return t in e&&e[t]!==Pe}function G(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var n,i,o;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(!G(e[i],t[i]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;for(i of e.entries())if(!G(i[1],t.get(i[0])))return!1;return!0}if(_t(e)&&_t(t))return!(e.size!==t.size||e.name!==t.name||e.lastModified!==t.lastModified||e.type!==t.type);if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(i of e.entries())if(!t.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(i=n;i--!==0;)if(e[i]!==t[i])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(o=Object.keys(e),n=o.length-St(e,o),n!==Object.keys(t).length-St(t,Object.keys(t)))return!1;for(i=n;i--!==0;)if(!Object.prototype.hasOwnProperty.call(t,o[i]))return!1;for(i=n;i--!==0;){var r=o[i];if(!G(e[r],t[r]))return!1}return!0}return e!==e&&t!==t}function St(e,t){let n=0;for(let o=t.length;o--!==0;){var i=t[o];e[i]===void 0&&n++}return n}function _t(e){return mn?e instanceof File:!1}function st(e){return Le(e)?e.replace(/\[|\]/gi,""):e}function J(e,t,n){return e?Le(t)?e[st(t)]:(t||"").split(/\.|\[(\d+)\]/).filter(Boolean).reduce((o,r)=>gn(o)&&r in o?o[r]:n,e):n}function me(e,t,n){if(Le(t)){e[st(t)]=n;return}const i=t.split(/\.|\[(\d+)\]/).filter(Boolean);let o=e;for(let r=0;r<i.length;r++){if(r===i.length-1){o[i[r]]=n;return}(!(i[r]in o)||Ft(o[i[r]]))&&(o[i[r]]=ot(i[r+1])?[]:{}),o=o[i[r]]}}function Je(e,t){if(Array.isArray(e)&&ot(t)){e.splice(Number(t),1);return}Se(e)&&delete e[t]}function Ct(e,t){if(Le(t)){delete e[st(t)];return}const n=t.split(/\.|\[(\d+)\]/).filter(Boolean);let i=e;for(let r=0;r<n.length;r++){if(r===n.length-1){Je(i,n[r]);break}if(!(n[r]in i)||Ft(i[n[r]]))break;i=i[n[r]]}const o=n.map((r,s)=>J(e,n.slice(0,s).join(".")));for(let r=o.length-1;r>=0;r--)if(pn(o[r])){if(r===0){Je(e,n[0]);continue}Je(o[r-1],n[r-1])}}function re(e){return Object.keys(e)}function Pt(e,t=void 0){const n=Re();return(n==null?void 0:n.provides[e])||Mt(e,t)}function Et(e,t,n){if(Array.isArray(e)){const i=[...e],o=i.findIndex(r=>G(r,t));return o>=0?i.splice(o,1):i.push(t),i}return G(e,t)?n:t}function wt(e,t=0){let n=null,i=[];return function(...o){return n&&clearTimeout(n),n=setTimeout(()=>{const r=e(...o);i.forEach(s=>s(r)),i=[]},t),new Promise(r=>i.push(r))}}function Vn(e,t){return Se(t)&&t.number?un(e):e}function tt(e,t){let n;return async function(...o){const r=e(...o);n=r;const s=await r;return r!==n?s:(n=void 0,t(s,o))}}function nt(e){return Array.isArray(e)?e:e?[e]:[]}function Me(e,t){const n={};for(const i in e)t.includes(i)||(n[i]=e[i]);return n}function Sn(e){let t=null,n=[];return function(...i){const o=ce(()=>{if(t!==o)return;const r=e(...i);n.forEach(s=>s(r)),n=[],t=null});return t=o,new Promise(r=>n.push(r))}}function dt(e,t,n){return t.slots.default?typeof e=="string"||!e?t.slots.default(n()):{default:()=>{var i,o;return(o=(i=t.slots).default)===null||o===void 0?void 0:o.call(i,n())}}:t.slots.default}function Ze(e){if(Bt(e))return e._value}function Bt(e){return"_value"in e}function _n(e){return e.type==="number"||e.type==="range"?Number.isNaN(e.valueAsNumber)?e.value:e.valueAsNumber:e.value}function Ne(e){if(!ut(e))return e;const t=e.target;if(Ae(t.type)&&Bt(t))return Ze(t);if(t.type==="file"&&t.files){const n=Array.from(t.files);return t.multiple?n:n[0]}if(yn(t))return Array.from(t.options).filter(n=>n.selected&&!n.disabled).map(Ze);if(Tt(t)){const n=Array.from(t.options).find(i=>i.selected);return n?Ze(n):t.value}return _n(t)}function Nt(e){const t={};return Object.defineProperty(t,"_$$isNormalized",{value:!0,writable:!1,enumerable:!1,configurable:!1}),e?Se(e)&&e._$$isNormalized?e:Se(e)?Object.keys(e).reduce((n,i)=>{const o=Cn(e[i]);return e[i]!==!1&&(n[i]=jt(o)),n},t):typeof e!="string"?t:e.split("|").reduce((n,i)=>{const o=En(i);return o.name&&(n[o.name]=jt(o.params)),n},t):t}function Cn(e){return e===!0?[]:Array.isArray(e)||Se(e)?e:[e]}function jt(e){const t=n=>typeof n=="string"&&n[0]==="@"?wn(n.slice(1)):n;return Array.isArray(e)?e.map(t):e instanceof RegExp?[e]:Object.keys(e).reduce((n,i)=>(n[i]=t(e[i]),n),{})}const En=e=>{let t=[];const n=e.split(":")[0];return e.includes(":")&&(t=e.split(":").slice(1).join(":").split(",")),{name:n,params:t}};function wn(e){const t=n=>{var i;return(i=J(n,e))!==null&&i!==void 0?i:n[e]};return t.__locatorRef=e,t}function jn(e){return Array.isArray(e)?e.filter(et):re(e).filter(t=>et(e[t])).map(t=>e[t])}const An={generateMessage:({field:e})=>`${e} is not valid.`,bails:!0,validateOnBlur:!0,validateOnChange:!0,validateOnInput:!1,validateOnModelUpdate:!0};let In=Object.assign({},An);const Oe=()=>In;async function Rt(e,t,n={}){const i=n==null?void 0:n.bails,o={name:(n==null?void 0:n.name)||"{field}",rules:t,label:n==null?void 0:n.label,bails:i??!0,formData:(n==null?void 0:n.values)||{}},r=await Mn(o,e);return Object.assign(Object.assign({},r),{valid:!r.errors.length})}async function Mn(e,t){const n=e.rules;if(se(n)||Be(n))return kn(t,Object.assign(Object.assign({},e),{rules:n}));if(q(n)||Array.isArray(n)){const u={field:e.label||e.name,name:e.name,label:e.label,form:e.formData,value:t},f=Array.isArray(n)?n:[n],c=f.length,h=[];for(let b=0;b<c;b++){const m=f[b],v=await m(t,u);if(!(typeof v!="string"&&!Array.isArray(v)&&v)){if(Array.isArray(v))h.push(...v);else{const j=typeof v=="string"?v:Lt(u);h.push(j)}if(e.bails)return{errors:h}}}return{errors:h}}const i=Object.assign(Object.assign({},e),{rules:Nt(n)}),o=[],r=Object.keys(i.rules),s=r.length;for(let u=0;u<s;u++){const f=r[u],c=await Tn(i,t,{name:f,params:i.rules[f]});if(c.error&&(o.push(c.error),e.bails))return{errors:o}}return{errors:o}}function Fn(e){return!!e&&e.name==="ValidationError"}function Ut(e){return{__type:"VVTypedSchema",async parse(n,i){var o;try{return{output:await e.validate(n,{abortEarly:!1,context:(i==null?void 0:i.formData)||{}}),errors:[]}}catch(r){if(!Fn(r))throw r;if(!(!((o=r.inner)===null||o===void 0)&&o.length)&&r.errors.length)return{errors:[{path:r.path,errors:r.errors}]};const s=r.inner.reduce((u,f)=>{const c=f.path||"";return u[c]||(u[c]={errors:[],path:c}),u[c].errors.push(...f.errors),u},{});return{errors:Object.values(s)}}}}}async function kn(e,t){const i=await(se(t.rules)?t.rules:Ut(t.rules)).parse(e,{formData:t.formData}),o=[];for(const r of i.errors)r.errors.length&&o.push(...r.errors);return{value:i.value,errors:o}}async function Tn(e,t,n){const i=cn(n.name);if(!i)throw new Error(`No such validator '${n.name}' exists.`);const o=xn(n.params,e.formData),r={field:e.label||e.name,name:e.name,label:e.label,value:t,form:e.formData,rule:Object.assign(Object.assign({},n),{params:o})},s=await i(t,o,r);return typeof s=="string"?{error:s}:{error:s?void 0:Lt(r)}}function Lt(e){const t=Oe().generateMessage;return t?t(e):"Field is invalid"}function xn(e,t){const n=i=>et(i)?i(t):i;return Array.isArray(e)?e.map(n):Object.keys(e).reduce((i,o)=>(i[o]=n(e[o]),i),{})}async function Pn(e,t){const i=await(se(e)?e:Ut(e)).parse(F(t),{formData:F(t)}),o={},r={};for(const s of i.errors){const u=s.errors,f=(s.path||"").replace(/\["(\d+)"\]/g,(c,h)=>`[${h}]`);o[f]={valid:!u.length,errors:u},u.length&&(r[f]=u[0])}return{valid:!i.errors.length,results:o,errors:r,values:i.value,source:"schema"}}async function Bn(e,t,n){const o=re(e).map(async c=>{var h,b,m;const v=(h=n==null?void 0:n.names)===null||h===void 0?void 0:h[c],S=await Rt(J(t,c),e[c],{name:(v==null?void 0:v.name)||c,label:v==null?void 0:v.label,values:t,bails:(m=(b=n==null?void 0:n.bailsMap)===null||b===void 0?void 0:b[c])!==null&&m!==void 0?m:!0});return Object.assign(Object.assign({},S),{path:c})});let r=!0;const s=await Promise.all(o),u={},f={};for(const c of s)u[c.path]={valid:c.valid,errors:c.errors},c.valid||(r=!1,f[c.path]=c.errors[0]);return{valid:r,results:u,errors:f,source:"schema"}}let At=0;function Nn(e,t){const{value:n,initialValue:i,setInitialValue:o}=Rn(e,t.modelValue,t.form);if(!t.form){let f=function(v){var S;"value"in v&&(n.value=v.value),"errors"in v&&h(v.errors),"touched"in v&&(m.touched=(S=v.touched)!==null&&S!==void 0?S:m.touched),"initialValue"in v&&o(v.initialValue)};const{errors:c,setErrors:h}=zn(),b=At>=Number.MAX_SAFE_INTEGER?0:++At,m=Ln(n,i,c,t.schema);return{id:b,path:e,value:n,initialValue:i,meta:m,flags:{pendingUnmount:{[b]:!1},pendingReset:!1},errors:c,setState:f}}const r=t.form.createPathState(e,{bails:t.bails,label:t.label,type:t.type,validate:t.validate,schema:t.schema}),s=M(()=>r.errors);function u(f){var c,h,b;"value"in f&&(n.value=f.value),"errors"in f&&((c=t.form)===null||c===void 0||c.setFieldError(x(e),f.errors)),"touched"in f&&((h=t.form)===null||h===void 0||h.setFieldTouched(x(e),(b=f.touched)!==null&&b!==void 0?b:!1)),"initialValue"in f&&o(f.initialValue)}return{id:Array.isArray(r.id)?r.id[r.id.length-1]:r.id,path:e,value:n,errors:s,meta:r,initialValue:i,flags:r.__flags,setState:u}}function Rn(e,t,n){const i=ue(x(t));function o(){return n?J(n.initialValues.value,x(e),x(i)):x(i)}function r(c){if(!n){i.value=c;return}n.setFieldInitialValue(x(e),c,!0)}const s=M(o);if(!n)return{value:ue(o()),initialValue:s,setInitialValue:r};const u=Un(t,n,s,e);return n.stageInitialValue(x(e),u,!0),{value:M({get(){return J(n.values,x(e))},set(c){n.setFieldValue(x(e),c,!1)}}),initialValue:s,setInitialValue:r}}function Un(e,t,n,i){return xe(e)?x(e):e!==void 0?e:J(t.values,x(i),x(n))}function Ln(e,t,n,i){const o=M(()=>{var s,u,f;return(f=(u=(s=O(i))===null||s===void 0?void 0:s.describe)===null||u===void 0?void 0:u.call(s).required)!==null&&f!==void 0?f:!1}),r=Te({touched:!1,pending:!1,valid:!0,required:o,validated:!!x(n).length,initialValue:M(()=>x(t)),dirty:M(()=>!G(x(e),x(t)))});return Ve(n,s=>{r.valid=!s.length},{immediate:!0,flush:"sync"}),r}function zn(){const e=ue([]);return{errors:e,setErrors:t=>{e.value=nt(t)}}}function Dn(e,t,n){return Ae(n==null?void 0:n.type)?Wn(e,t,n):zt(e,t,n)}function zt(e,t,n){const{initialValue:i,validateOnMount:o,bails:r,type:s,checkedValue:u,label:f,validateOnValueUpdate:c,uncheckedValue:h,controlled:b,keepValueOnUnmount:m,syncVModel:v,form:S}=$n(n),j=b?Pt(Ue):void 0,p=S||j,A=M(()=>we(O(e))),I=M(()=>{if(O(p==null?void 0:p.schema))return;const w=x(t);return Be(w)||se(w)||q(w)||Array.isArray(w)?w:Nt(w)}),Z=!q(I.value)&&se(O(t)),{id:R,value:Q,initialValue:ee,meta:N,setState:le,errors:z,flags:D}=Nn(A,{modelValue:i,form:p,bails:r,label:f,type:s,validate:I.value?U:void 0,schema:Z?t:void 0}),W=M(()=>z.value[0]);v&&qn({value:Q,prop:v,handleChange:E,shouldValidate:()=>c&&!D.pendingReset});const oe=(y,w=!1)=>{N.touched=!0,w&&te()};async function fe(y){var w,T;if(p!=null&&p.validateSchema){const{results:k}=await p.validateSchema(y);return(w=k[O(A)])!==null&&w!==void 0?w:{valid:!0,errors:[]}}return I.value?Rt(Q.value,I.value,{name:O(A),label:O(f),values:(T=p==null?void 0:p.values)!==null&&T!==void 0?T:{},bails:r}):{valid:!0,errors:[]}}const te=tt(async()=>(N.pending=!0,N.validated=!0,fe("validated-only")),y=>(D.pendingUnmount[Y.id]||(le({errors:y.errors}),N.pending=!1,N.valid=y.valid),y)),ne=tt(async()=>fe("silent"),y=>(N.valid=y.valid,y));function U(y){return(y==null?void 0:y.mode)==="silent"?ne():te()}function E(y,w=!0){const T=Ne(y);Ce(T,w)}it(()=>{if(o)return te();(!p||!p.validateSchema)&&ne()});function ge(y){N.touched=y}function ve(y){var w;const T=y&&"value"in y?y.value:ee.value;le({value:F(T),initialValue:F(T),touched:(w=y==null?void 0:y.touched)!==null&&w!==void 0?w:!1,errors:(y==null?void 0:y.errors)||[]}),N.pending=!1,N.validated=!1,ne()}const pe=Re();function Ce(y,w=!0){Q.value=pe&&v?Vn(y,pe.props.modelModifiers):y,(w?te:ne)()}function Ie(y){le({errors:Array.isArray(y)?y:[y]})}const ct=M({get(){return Q.value},set(y){Ce(y,c)}}),Y={id:R,name:A,label:f,value:ct,meta:N,errors:z,errorMessage:W,type:s,checkedValue:u,uncheckedValue:h,bails:r,keepValueOnUnmount:m,resetField:ve,handleReset:()=>ve(),validate:U,handleChange:E,handleBlur:oe,setState:le,setTouched:ge,setErrors:Ie,setValue:Ce};if(Qe(hn,Y),xe(t)&&typeof x(t)!="function"&&Ve(t,(y,w)=>{G(y,w)||(N.validated?te():ne())},{deep:!0}),!p)return Y;const ze=M(()=>{const y=I.value;return!y||q(y)||Be(y)||se(y)||Array.isArray(y)?{}:Object.keys(y).reduce((w,T)=>{const k=jn(y[T]).map(he=>he.__locatorRef).reduce((he,de)=>{const ie=J(p.values,de)||p.values[de];return ie!==void 0&&(he[de]=ie),he},{});return Object.assign(w,k),w},{})});return Ve(ze,(y,w)=>{if(!Object.keys(y).length)return;!G(y,w)&&(N.validated?te():ne())}),nn(()=>{var y;const w=(y=O(Y.keepValueOnUnmount))!==null&&y!==void 0?y:O(p.keepValuesOnUnmount),T=O(A);if(w||!p||D.pendingUnmount[Y.id]){p==null||p.removePathState(T,R);return}D.pendingUnmount[Y.id]=!0;const k=p.getPathState(T);if(Array.isArray(k==null?void 0:k.id)&&(k!=null&&k.multiple)?k!=null&&k.id.includes(Y.id):(k==null?void 0:k.id)===Y.id){if(k!=null&&k.multiple&&Array.isArray(k.value)){const de=k.value.findIndex(ie=>G(ie,O(Y.checkedValue)));if(de>-1){const ie=[...k.value];ie.splice(de,1),p.setFieldValue(T,ie)}Array.isArray(k.id)&&k.id.splice(k.id.indexOf(Y.id),1)}else p.unsetPathValue(O(A));p.removePathState(T,R)}}),Y}function $n(e){const t=()=>({initialValue:void 0,validateOnMount:!1,bails:!0,label:void 0,validateOnValueUpdate:!0,keepValueOnUnmount:void 0,syncVModel:!1,controlled:!0}),n=!!(e!=null&&e.syncVModel),i=typeof(e==null?void 0:e.syncVModel)=="string"?e.syncVModel:(e==null?void 0:e.modelPropName)||"modelValue",o=n&&!("initialValue"in(e||{}))?rt(Re(),i):e==null?void 0:e.initialValue;if(!e)return Object.assign(Object.assign({},t()),{initialValue:o});const r="valueProp"in e?e.valueProp:e.checkedValue,s="standalone"in e?!e.standalone:e.controlled,u=(e==null?void 0:e.modelPropName)||(e==null?void 0:e.syncVModel)||!1;return Object.assign(Object.assign(Object.assign({},t()),e||{}),{initialValue:o,controlled:s??!0,checkedValue:r,syncVModel:u})}function Wn(e,t,n){const i=n!=null&&n.standalone?void 0:Pt(Ue),o=n==null?void 0:n.checkedValue,r=n==null?void 0:n.uncheckedValue;function s(u){const f=u.handleChange,c=M(()=>{const b=O(u.value),m=O(o);return Array.isArray(b)?b.findIndex(v=>G(v,m))>=0:G(m,b)});function h(b,m=!0){var v,S;if(c.value===((v=b==null?void 0:b.target)===null||v===void 0?void 0:v.checked)){m&&u.validate();return}const j=O(e),p=i==null?void 0:i.getPathState(j),A=Ne(b);let I=(S=O(o))!==null&&S!==void 0?S:A;i&&(p!=null&&p.multiple)&&p.type==="checkbox"?I=Et(J(i.values,j)||[],I,void 0):(n==null?void 0:n.type)==="checkbox"&&(I=Et(O(u.value),I,O(r))),f(I,m)}return Object.assign(Object.assign({},u),{checked:c,checkedValue:o,uncheckedValue:r,handleChange:h})}return s(zt(e,t,n))}function qn({prop:e,value:t,handleChange:n,shouldValidate:i}){const o=Re();if(!o||!e)return;const r=typeof e=="string"?e:"modelValue",s=`update:${r}`;r in o.props&&(Ve(t,u=>{G(u,rt(o,r))||o.emit(s,u)}),Ve(()=>rt(o,r),u=>{if(u===Pe&&t.value===void 0)return;const f=u===Pe?void 0:u;G(f,t.value)||n(f,i())}))}function rt(e,t){if(e)return e.props[t]}const Hn=at({name:"Field",inheritAttrs:!1,props:{as:{type:[String,Object],default:void 0},name:{type:String,required:!0},rules:{type:[Object,String,Function],default:void 0},validateOnMount:{type:Boolean,default:!1},validateOnBlur:{type:Boolean,default:void 0},validateOnChange:{type:Boolean,default:void 0},validateOnInput:{type:Boolean,default:void 0},validateOnModelUpdate:{type:Boolean,default:void 0},bails:{type:Boolean,default:()=>Oe().bails},label:{type:String,default:void 0},uncheckedValue:{type:null,default:void 0},modelValue:{type:null,default:Pe},modelModifiers:{type:null,default:()=>({})},"onUpdate:modelValue":{type:null,default:void 0},standalone:{type:Boolean,default:!1},keepValue:{type:Boolean,default:void 0}},setup(e,t){const n=be(e,"rules"),i=be(e,"name"),o=be(e,"label"),r=be(e,"uncheckedValue"),s=be(e,"keepValue"),{errors:u,value:f,errorMessage:c,validate:h,handleChange:b,handleBlur:m,setTouched:v,resetField:S,handleReset:j,meta:p,checked:A,setErrors:I,setValue:Z}=Dn(i,n,{validateOnMount:e.validateOnMount,bails:e.bails,standalone:e.standalone,type:t.attrs.type,initialValue:Yn(e,t),checkedValue:t.attrs.value,uncheckedValue:r,label:o,validateOnValueUpdate:e.validateOnModelUpdate,keepValueOnUnmount:s,syncVModel:!0}),R=function(D,W=!0){b(D,W)},Q=M(()=>{const{validateOnInput:z,validateOnChange:D,validateOnBlur:W,validateOnModelUpdate:oe}=Xn(e);function fe(E){m(E,W),q(t.attrs.onBlur)&&t.attrs.onBlur(E)}function te(E){R(E,z),q(t.attrs.onInput)&&t.attrs.onInput(E)}function ne(E){R(E,D),q(t.attrs.onChange)&&t.attrs.onChange(E)}const U={name:e.name,onBlur:fe,onInput:te,onChange:ne};return U["onUpdate:modelValue"]=E=>R(E,oe),U}),ee=M(()=>{const z=Object.assign({},Q.value);Ae(t.attrs.type)&&A&&(z.checked=A.value);const D=It(e,t);return On(D,t.attrs)&&(z.value=f.value),z}),N=M(()=>Object.assign(Object.assign({},Q.value),{modelValue:f.value}));function le(){return{field:ee.value,componentField:N.value,value:f.value,meta:p,errors:u.value,errorMessage:c.value,validate:h,resetField:S,handleChange:R,handleInput:z=>R(z,!1),handleReset:j,handleBlur:Q.value.onBlur,setTouched:v,setErrors:I,setValue:Z}}return t.expose({value:f,meta:p,errors:u,errorMessage:c,setErrors:I,setTouched:v,setValue:Z,reset:S,validate:h,handleChange:b}),()=>{const z=lt(It(e,t)),D=dt(z,t,le);return z?ke(z,Object.assign(Object.assign({},t.attrs),ee.value),D):D}}});function It(e,t){let n=e.as||"";return!e.as&&!t.slots.default&&(n="input"),n}function Xn(e){var t,n,i,o;const{validateOnInput:r,validateOnChange:s,validateOnBlur:u,validateOnModelUpdate:f}=Oe();return{validateOnInput:(t=e.validateOnInput)!==null&&t!==void 0?t:r,validateOnChange:(n=e.validateOnChange)!==null&&n!==void 0?n:s,validateOnBlur:(i=e.validateOnBlur)!==null&&i!==void 0?i:u,validateOnModelUpdate:(o=e.validateOnModelUpdate)!==null&&o!==void 0?o:f}}function Yn(e,t){return Ae(t.attrs.type)?Vt(e,"modelValue")?e.modelValue:void 0:Vt(e,"modelValue")?e.modelValue:t.attrs.value}const sr=Hn;let Gn=0;const Fe=["bails","fieldsCount","id","multiple","type","validate"];function Dt(e){const t=(e==null?void 0:e.initialValues)||{},n=Object.assign({},O(t)),i=x(e==null?void 0:e.validationSchema);return i&&se(i)&&q(i.cast)?F(i.cast(n)||{}):F(n)}function Kn(e){var t;const n=Gn++,i=(e==null?void 0:e.name)||"Form";let o=0;const r=ue(!1),s=ue(!1),u=ue(0),f=[],c=Te(Dt(e)),h=ue([]),b=ue({}),m=ue({}),v=Sn(()=>{m.value=h.value.reduce((l,a)=>(l[we(O(a.path))]=a,l),{})});function S(l,a){const d=E(l);if(!d){typeof l=="string"&&(b.value[we(l)]=nt(a));return}if(typeof l=="string"){const g=we(l);b.value[g]&&delete b.value[g]}d.errors=nt(a),d.valid=!d.errors.length}function j(l){re(l).forEach(a=>{S(a,l[a])})}e!=null&&e.initialErrors&&j(e.initialErrors);const p=M(()=>{const l=h.value.reduce((a,d)=>(d.errors.length&&(a[O(d.path)]=d.errors),a),{});return Object.assign(Object.assign({},b.value),l)}),A=M(()=>re(p.value).reduce((l,a)=>{const d=p.value[a];return d!=null&&d.length&&(l[a]=d[0]),l},{})),I=M(()=>h.value.reduce((l,a)=>(l[O(a.path)]={name:O(a.path)||"",label:a.label||""},l),{})),Z=M(()=>h.value.reduce((l,a)=>{var d;return l[O(a.path)]=(d=a.bails)!==null&&d!==void 0?d:!0,l},{})),R=Object.assign({},(e==null?void 0:e.initialErrors)||{}),Q=(t=e==null?void 0:e.keepValuesOnUnmount)!==null&&t!==void 0?t:!1,{initialValues:ee,originalInitialValues:N,setInitialValues:le}=Zn(h,c,e),z=Jn(h,c,N,A),D=M(()=>h.value.reduce((l,a)=>{const d=J(c,O(a.path));return me(l,O(a.path),d),l},{})),W=e==null?void 0:e.validationSchema;function oe(l,a){var d,g;const _=M(()=>J(ee.value,O(l))),C=m.value[O(l)],V=(a==null?void 0:a.type)==="checkbox"||(a==null?void 0:a.type)==="radio";if(C&&V){C.multiple=!0;const ae=o++;return Array.isArray(C.id)?C.id.push(ae):C.id=[C.id,ae],C.fieldsCount++,C.__flags.pendingUnmount[ae]=!1,C}const B=M(()=>J(c,O(l))),L=O(l),H=ve.findIndex(ae=>ae===L);H!==-1&&ve.splice(H,1);const P=M(()=>{var ae,Ee,He,Xe;const Ye=O(W);if(se(Ye))return(Ee=(ae=Ye.describe)===null||ae===void 0?void 0:ae.call(Ye,O(l)).required)!==null&&Ee!==void 0?Ee:!1;const Ge=O(a==null?void 0:a.schema);return se(Ge)&&(Xe=(He=Ge.describe)===null||He===void 0?void 0:He.call(Ge).required)!==null&&Xe!==void 0?Xe:!1}),X=o++,K=Te({id:X,path:l,touched:!1,pending:!1,valid:!0,validated:!!(!((d=R[L])===null||d===void 0)&&d.length),required:P,initialValue:_,errors:an([]),bails:(g=a==null?void 0:a.bails)!==null&&g!==void 0?g:!1,label:a==null?void 0:a.label,type:(a==null?void 0:a.type)||"default",value:B,multiple:!1,__flags:{pendingUnmount:{[X]:!1},pendingReset:!1},fieldsCount:1,validate:a==null?void 0:a.validate,dirty:M(()=>!G(x(B),x(_)))});return h.value.push(K),m.value[L]=K,v(),A.value[L]&&!R[L]&&ce(()=>{ye(L,{mode:"silent"})}),xe(l)&&Ve(l,ae=>{v();const Ee=F(B.value);m.value[ae]=K,ce(()=>{me(c,ae,Ee)})}),K}const fe=wt(ht,5),te=wt(ht,5),ne=tt(async l=>await(l==="silent"?fe():te()),(l,[a])=>{const d=re(w.errorBag.value),_=[...new Set([...re(l.results),...h.value.map(C=>C.path),...d])].sort().reduce((C,V)=>{var B;const L=V,H=E(L)||ge(L),P=((B=l.results[L])===null||B===void 0?void 0:B.errors)||[],X=O(H==null?void 0:H.path)||L,K=Qn({errors:P,valid:!P.length},C.results[X]);return C.results[X]=K,K.valid||(C.errors[X]=K.errors[0]),H&&b.value[X]&&delete b.value[X],H?(H.valid=K.valid,a==="silent"||a==="validated-only"&&!H.validated||S(H,K.errors),C):(S(X,P),C)},{valid:l.valid,results:{},errors:{},source:l.source});return l.values&&(_.values=l.values,_.source=l.source),re(_.results).forEach(C=>{var V;const B=E(C);B&&a!=="silent"&&(a==="validated-only"&&!B.validated||S(B,(V=_.results[C])===null||V===void 0?void 0:V.errors))}),_});function U(l){h.value.forEach(l)}function E(l){const a=typeof l=="string"?we(l):l;return typeof a=="string"?m.value[a]:a}function ge(l){return h.value.filter(d=>l.startsWith(O(d.path))).reduce((d,g)=>d?g.path.length>d.path.length?g:d:g,void 0)}let ve=[],pe;function Ce(l){return ve.push(l),pe||(pe=ce(()=>{[...ve].sort().reverse().forEach(d=>{Ct(c,d)}),ve=[],pe=null})),pe}function Ie(l){return function(d,g){return function(C){return C instanceof Event&&(C.preventDefault(),C.stopPropagation()),U(V=>V.touched=!0),r.value=!0,u.value++,_e().then(V=>{const B=F(c);if(V.valid&&typeof d=="function"){const L=F(D.value);let H=l?L:B;return V.values&&(H=V.source==="schema"?V.values:Object.assign({},H,V.values)),d(H,{evt:C,controlledValues:L,setErrors:j,setFieldError:S,setTouched:De,setFieldTouched:ie,setValues:he,setFieldValue:T,resetForm:$e,resetField:ft})}!V.valid&&typeof g=="function"&&g({values:B,evt:C,errors:V.errors,results:V.results})}).then(V=>(r.value=!1,V),V=>{throw r.value=!1,V})}}}const Y=Ie(!1);Y.withControlled=Ie(!0);function ze(l,a){const d=h.value.findIndex(_=>_.path===l&&(Array.isArray(_.id)?_.id.includes(a):_.id===a)),g=h.value[d];if(!(d===-1||!g)){if(ce(()=>{ye(l,{mode:"silent",warn:!1})}),g.multiple&&g.fieldsCount&&g.fieldsCount--,Array.isArray(g.id)){const _=g.id.indexOf(a);_>=0&&g.id.splice(_,1),delete g.__flags.pendingUnmount[a]}(!g.multiple||g.fieldsCount<=0)&&(h.value.splice(d,1),vt(l),v(),delete m.value[l])}}function y(l){re(m.value).forEach(a=>{a.startsWith(l)&&delete m.value[a]}),h.value=h.value.filter(a=>!a.path.startsWith(l)),ce(()=>{v()})}const w={name:i,formId:n,values:c,controlledValues:D,errorBag:p,errors:A,schema:W,submitCount:u,meta:z,isSubmitting:r,isValidating:s,fieldArrays:f,keepValuesOnUnmount:Q,validateSchema:x(W)?ne:void 0,validate:_e,setFieldError:S,validateField:ye,setFieldValue:T,setValues:he,setErrors:j,setFieldTouched:ie,setTouched:De,resetForm:$e,resetField:ft,handleSubmit:Y,useFieldModel:Yt,defineInputBinds:Gt,defineComponentBinds:Kt,defineField:qe,stageInitialValue:Ht,unsetInitialValue:vt,setFieldInitialValue:We,createPathState:oe,getPathState:E,unsetPathValue:Ce,removePathState:ze,initialValues:ee,getAllPathStates:()=>h.value,destroyPath:y,isFieldTouched:$t,isFieldDirty:Wt,isFieldValid:qt};function T(l,a,d=!0){const g=F(a),_=typeof l=="string"?l:l.path;E(_)||oe(_),me(c,_,g),d&&ye(_)}function k(l,a=!0){re(c).forEach(d=>{delete c[d]}),re(l).forEach(d=>{T(d,l[d],!1)}),a&&_e()}function he(l,a=!0){je(c,l),f.forEach(d=>d&&d.reset()),a&&_e()}function de(l,a){const d=E(O(l))||oe(l);return M({get(){return d.value},set(g){var _;const C=O(l);T(C,g,(_=O(a))!==null&&_!==void 0?_:!1)}})}function ie(l,a){const d=E(l);d&&(d.touched=a)}function $t(l){const a=E(l);return a?a.touched:h.value.filter(d=>d.path.startsWith(l)).some(d=>d.touched)}function Wt(l){const a=E(l);return a?a.dirty:h.value.filter(d=>d.path.startsWith(l)).some(d=>d.dirty)}function qt(l){const a=E(l);return a?a.valid:h.value.filter(d=>d.path.startsWith(l)).every(d=>d.valid)}function De(l){if(typeof l=="boolean"){U(a=>{a.touched=l});return}re(l).forEach(a=>{ie(a,!!l[a])})}function ft(l,a){var d;const g=a&&"value"in a?a.value:J(ee.value,l),_=E(l);_&&(_.__flags.pendingReset=!0),We(l,F(g),!0),T(l,g,!1),ie(l,(d=a==null?void 0:a.touched)!==null&&d!==void 0?d:!1),S(l,(a==null?void 0:a.errors)||[]),ce(()=>{_&&(_.__flags.pendingReset=!1)})}function $e(l,a){let d=F(l!=null&&l.values?l.values:N.value);d=a!=null&&a.force?d:je(N.value,d),d=se(W)&&q(W.cast)?W.cast(d):d,le(d,{force:a==null?void 0:a.force}),U(g=>{var _;g.__flags.pendingReset=!0,g.validated=!1,g.touched=((_=l==null?void 0:l.touched)===null||_===void 0?void 0:_[O(g.path)])||!1,T(O(g.path),J(d,O(g.path)),!1),S(O(g.path),void 0)}),a!=null&&a.force?k(d,!1):he(d,!1),j((l==null?void 0:l.errors)||{}),u.value=(l==null?void 0:l.submitCount)||0,ce(()=>{_e({mode:"silent"}),U(g=>{g.__flags.pendingReset=!1})})}async function _e(l){const a=(l==null?void 0:l.mode)||"force";if(a==="force"&&U(V=>V.validated=!0),w.validateSchema)return w.validateSchema(a);s.value=!0;const d=await Promise.all(h.value.map(V=>V.validate?V.validate(l).then(B=>({key:O(V.path),valid:B.valid,errors:B.errors,value:B.value})):Promise.resolve({key:O(V.path),valid:!0,errors:[],value:void 0})));s.value=!1;const g={},_={},C={};for(const V of d)g[V.key]={valid:V.valid,errors:V.errors},V.value&&me(C,V.key,V.value),V.errors.length&&(_[V.key]=V.errors[0]);return{valid:d.every(V=>V.valid),results:g,errors:_,values:C,source:"fields"}}async function ye(l,a){var d;const g=E(l);if(g&&(a==null?void 0:a.mode)!=="silent"&&(g.validated=!0),W){const{results:_}=await ne((a==null?void 0:a.mode)||"validated-only");return _[l]||{errors:[],valid:!0}}return g!=null&&g.validate?g.validate(a):(!g&&(d=a==null?void 0:a.warn),Promise.resolve({errors:[],valid:!0}))}function vt(l){Ct(ee.value,l)}function Ht(l,a,d=!1){We(l,a),me(c,l,a),d&&!(e!=null&&e.initialValues)&&me(N.value,l,F(a))}function We(l,a,d=!1){me(ee.value,l,F(a)),d&&me(N.value,l,F(a))}async function ht(){const l=x(W);if(!l)return{valid:!0,results:{},errors:{},source:"none"};s.value=!0;const a=Be(l)||se(l)?await Pn(l,c):await Bn(l,c,{names:I.value,bailsMap:Z.value});return s.value=!1,a}const Xt=Y((l,{evt:a})=>{xt(a)&&a.target.submit()});it(()=>{if(e!=null&&e.initialErrors&&j(e.initialErrors),e!=null&&e.initialTouched&&De(e.initialTouched),e!=null&&e.validateOnMount){_e();return}w.validateSchema&&w.validateSchema("silent")}),xe(W)&&Ve(W,()=>{var l;(l=w.validateSchema)===null||l===void 0||l.call(w,"validated-only")}),Qe(Ue,w);function qe(l,a){const d=q(a)||a==null?void 0:a.label,g=E(O(l))||oe(l,{label:d}),_=()=>q(a)?a(Me(g,Fe)):a||{};function C(){var P;g.touched=!0,((P=_().validateOnBlur)!==null&&P!==void 0?P:Oe().validateOnBlur)&&ye(O(g.path))}function V(){var P;((P=_().validateOnInput)!==null&&P!==void 0?P:Oe().validateOnInput)&&ce(()=>{ye(O(g.path))})}function B(){var P;((P=_().validateOnChange)!==null&&P!==void 0?P:Oe().validateOnChange)&&ce(()=>{ye(O(g.path))})}const L=M(()=>{const P={onChange:B,onInput:V,onBlur:C};return q(a)?Object.assign(Object.assign({},P),a(Me(g,Fe)).props||{}):a!=null&&a.props?Object.assign(Object.assign({},P),a.props(Me(g,Fe))):P});return[de(l,()=>{var P,X,K;return(K=(P=_().validateOnModelUpdate)!==null&&P!==void 0?P:(X=Oe())===null||X===void 0?void 0:X.validateOnModelUpdate)!==null&&K!==void 0?K:!0}),L]}function Yt(l){return Array.isArray(l)?l.map(a=>de(a,!0)):de(l)}function Gt(l,a){const[d,g]=qe(l,a);function _(){g.value.onBlur()}function C(B){const L=Ne(B);T(O(l),L,!1),g.value.onInput()}function V(B){const L=Ne(B);T(O(l),L,!1),g.value.onChange()}return M(()=>Object.assign(Object.assign({},g.value),{onBlur:_,onInput:C,onChange:V,value:d.value}))}function Kt(l,a){const[d,g]=qe(l,a),_=E(O(l));function C(V){d.value=V}return M(()=>{const V=q(a)?a(Me(_,Fe)):a||{};return Object.assign({[V.model||"modelValue"]:d.value,[`onUpdate:${V.model||"modelValue"}`]:C},g.value)})}const mt=Object.assign(Object.assign({},w),{values:tn(c),handleReset:()=>$e(),submitForm:Xt});return Qe(vn,mt),mt}function Jn(e,t,n,i){const o={touched:"some",pending:"some",valid:"every"},r=M(()=>!G(t,x(n)));function s(){const f=e.value;return re(o).reduce((c,h)=>{const b=o[h];return c[h]=f[b](m=>m[h]),c},{})}const u=Te(s());return rn(()=>{const f=s();u.touched=f.touched,u.valid=f.valid,u.pending=f.pending}),M(()=>Object.assign(Object.assign({initialValues:x(n)},u),{valid:u.valid&&!re(i.value).length,dirty:r.value}))}function Zn(e,t,n){const i=Dt(n),o=ue(i),r=ue(F(i));function s(u,f){f!=null&&f.force?(o.value=F(u),r.value=F(u)):(o.value=je(F(o.value)||{},F(u)),r.value=je(F(r.value)||{},F(u))),f!=null&&f.updateFields&&e.value.forEach(c=>{if(c.touched)return;const b=J(o.value,O(c.path));me(t,O(c.path),F(b))})}return{initialValues:o,originalInitialValues:r,setInitialValues:s}}function Qn(e,t){return t?{valid:e.valid&&t.valid,errors:[...e.errors,...t.errors]}:e}const er=at({name:"Form",inheritAttrs:!1,props:{as:{type:null,default:"form"},validationSchema:{type:Object,default:void 0},initialValues:{type:Object,default:void 0},initialErrors:{type:Object,default:void 0},initialTouched:{type:Object,default:void 0},validateOnMount:{type:Boolean,default:!1},onSubmit:{type:Function,default:void 0},onInvalidSubmit:{type:Function,default:void 0},keepValues:{type:Boolean,default:!1},name:{type:String,default:"Form"}},setup(e,t){const n=be(e,"validationSchema"),i=be(e,"keepValues"),{errors:o,errorBag:r,values:s,meta:u,isSubmitting:f,isValidating:c,submitCount:h,controlledValues:b,validate:m,validateField:v,handleReset:S,resetForm:j,handleSubmit:p,setErrors:A,setFieldError:I,setFieldValue:Z,setValues:R,setFieldTouched:Q,setTouched:ee,resetField:N}=Kn({validationSchema:n.value?n:void 0,initialValues:e.initialValues,initialErrors:e.initialErrors,initialTouched:e.initialTouched,validateOnMount:e.validateOnMount,keepValuesOnUnmount:i,name:e.name}),le=p((U,{evt:E})=>{xt(E)&&E.target.submit()},e.onInvalidSubmit),z=e.onSubmit?p(e.onSubmit,e.onInvalidSubmit):le;function D(U){ut(U)&&U.preventDefault(),S(),typeof t.attrs.onReset=="function"&&t.attrs.onReset()}function W(U,E){return p(typeof U=="function"&&!E?U:E,e.onInvalidSubmit)(U)}function oe(){return F(s)}function fe(){return F(u.value)}function te(){return F(o.value)}function ne(){return{meta:u.value,errors:o.value,errorBag:r.value,values:s,isSubmitting:f.value,isValidating:c.value,submitCount:h.value,controlledValues:b.value,validate:m,validateField:v,handleSubmit:W,handleReset:S,submitForm:le,setErrors:A,setFieldError:I,setFieldValue:Z,setValues:R,setFieldTouched:Q,setTouched:ee,resetForm:j,resetField:N,getValues:oe,getMeta:fe,getErrors:te}}return t.expose({setFieldError:I,setErrors:A,setFieldValue:Z,setValues:R,setFieldTouched:Q,setTouched:ee,resetForm:j,validate:m,validateField:v,resetField:N,getValues:oe,getMeta:fe,getErrors:te,values:s,meta:u,errors:o}),function(){const E=e.as==="form"?e.as:e.as?lt(e.as):null,ge=dt(E,t,ne);return E?ke(E,Object.assign(Object.assign(Object.assign({},E==="form"?{novalidate:!0}:{}),t.attrs),{onSubmit:z,onReset:D}),ge):ge}}}),dr=er,tr=at({name:"ErrorMessage",props:{as:{type:String,default:void 0},name:{type:String,required:!0}},setup(e,t){const n=Mt(Ue,void 0),i=M(()=>n==null?void 0:n.errors.value[e.name]);function o(){return{message:i.value}}return()=>{if(!i.value)return;const r=e.as?lt(e.as):e.as,s=dt(r,t,o),u=Object.assign({role:"alert"},t.attrs);return!r&&(Array.isArray(s)||!s)&&(s!=null&&s.length)?s:(Array.isArray(s)||!s)&&!(s!=null&&s.length)?ke(r||"span",u,i.value):ke(r,u,s)}}}),cr=tr;export{cr as E,sr as F,ir as _,lr as a,dr as b,or as c,ur as d,ar as v};
